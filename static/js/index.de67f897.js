(()=>{"use strict";var e={592:function(e,t,r){var n=r(893),l=r(294),o=r(745);let u=e=>e.preventDefault(),s=function*(e,t,r){let n=t?e.length:e[r].length;for(let l=0;l<n;l++){let n=t?l:r,o=t?r:l,u=e[n][o];yield[u,o,n]}},a=(e,t,r)=>{for(let[n,l,o]of s(e,t,r))0===n&&(e[o][l]=2)},i=(e,t,r,n)=>{let l=!1,o=null,u=0;for(let[a,,]of s(e,t,r))if(1===a)if(l){if(o===n[u])return!1;o++}else{if(u===n.length)return!1;l=!0,o=1}else if(l){if(o!==n[u])return!1;u++,l=!1}return l?u===n.length-1&&o===n[u]:u===n.length},h=(e,t,r)=>{let n=!1;for(let[l,o]of[[!0,r],[!1,t]])for(let t=0;t<o.length;t++)i(e,l,t,o[t])&&(n||(e=e.map(e=>e.slice()),n=!0),a(e,l,t));return e},c=(e,t,r)=>{for(let[n,l]of[[!0,r],[!1,t]])for(let t=0;t<l.length;t++)if(!i(e,n,t,l[t]))return!1;return!0},d=(e,t)=>0===e?1===t?1:2:1===e?2*(1!==t):+(1===t),f=e=>{let{clue:t,isColHovered:r,Elt:l}=e;return(0,n.jsxs)("th",{onMouseDown:u,className:r?"colhover":"",children:[t.map((e,t)=>(0,n.jsx)(l,{children:e},t)),0===t.length&&"-"]})},v=e=>(0,n.jsx)(f,{...e,Elt:"div"}),p=e=>(0,n.jsx)(f,{...e,Elt:"span"}),x=["empty","filled","knownempty"],j=(0,l.memo)(e=>{let{colIndex:t,rowIndex:r,value:l,onMouseMove:o,onMouseDown:u,onChangeHoveredCol:s,...a}=e;return(0,n.jsx)("td",{...a,onMouseMove:e=>o(t,r,e),onMouseDown:e=>u(t,r,e),onMouseEnter:()=>s(t),onMouseLeave:()=>s(null),className:x[l]})}),m=(0,l.memo)(e=>{let{row:t,rowIndex:r,rowClues:l,onMouseMove:o,onMouseDown:u,onChangeHoveredCol:s}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)(p,{clue:l[r]}),t.map((e,t)=>(0,n.jsx)(j,{colIndex:t,rowIndex:r,value:e,onMouseMove:o,onMouseDown:u,onChangeHoveredCol:s},t))]})}),g=(0,l.memo)(e=>{let{rowClues:t,displayValue:r,onMouseMove:l,onMouseDown:o,onChangeHoveredCol:u}=e;return(0,n.jsx)("tbody",{children:r.map((e,r)=>(0,n.jsx)(m,{row:e,rowIndex:r,rowClues:t,onMouseMove:l,onMouseDown:o,onChangeHoveredCol:u},r))})}),b=e=>{let{value:t,rowClues:r,colClues:o,onChange:s}=e,a=(0,l.useRef)(null),[i,f]=(0,l.useState)(null),p=(0,l.useCallback)((e,t,r)=>{(1===r.buttons||2===r.buttons)&&(s(n=>{let l=d(n[t][e],r.buttons);a.current=l;let o=n.slice();return o[t]=o[t].slice(),o[t][e]=l,o}),r.preventDefault())},[s]),x=(0,l.useCallback)((e,t,r)=>{(1===r.buttons||2===r.buttons)&&s(r=>{if(null===a.current||r[t][e]===a.current)return r;let n=r.slice();return n[t]=n[t].slice(),n[t][e]=a.current,n})},[s]),j=(0,l.useMemo)(()=>h(t,r,o),[t,r,o]),m=(0,l.useMemo)(()=>c(t,r,o),[t,r,o]);return(0,n.jsxs)("table",{className:"board",onContextMenu:u,children:[m&&(0,n.jsx)("caption",{style:{captionSide:"bottom"},children:"Solved!"}),(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),o.map((e,t)=>(0,n.jsx)(v,{clue:e,isColHovered:i===t},t))]})}),(0,n.jsx)(g,{rowClues:r,displayValue:j,onMouseMove:x,onMouseDown:p,onChangeHoveredCol:f})]})},C=(e,t)=>Array(t).fill(Array(e).fill(0)),M=(e,t)=>{let r=[];for(let n=0;n<t;n++){let t=[];for(let r=0;r<e;r++)t.push(+(.5>Math.random()));r.push(t)}return r},w=(e,t,r)=>{let n,l=[],o=!1;for(let[u,,]of s(e,t,r))1===u?o?n++:(o=!0,n=1):o&&(l.push(n),o=!1);return o&&l.push(n),l},y=e=>{let t=e.length,r=e[0].length,n=[],l=[];for(let[o,u,s]of[[!1,t,n],[!0,r,l]])for(let t=0;t<u;t++)s.push(w(e,o,t));return[n,l]},k=e=>{let t=parseInt(e,10);return!t||isNaN(t)||!isFinite(t)||t<1?null:t};o.createRoot(document.getElementById("root")).render((0,n.jsx)(l.StrictMode,{children:(0,n.jsx)(()=>{let[e,t]=(0,l.useState)("8"),[r,o]=(0,l.useState)("8"),u=k(e),s=k(r),a=()=>{let[e,t]=y(M(u,s));return[e,t]},[[i,h],c]=(0,l.useState)(a),[d,f]=(0,l.useState)(()=>C(u,s));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["Width: ",(0,n.jsx)("input",{type:"number",value:e,onChange:e=>t(e.target.value)})]}),(0,n.jsxs)("div",{children:["Height: ",(0,n.jsx)("input",{type:"number",value:r,onChange:e=>o(e.target.value)})]}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"button",value:"New puzzle",disabled:null===u||null===s,onClick:()=>{c(a()),f(C(u,s))}})}),(0,n.jsx)(b,{value:d,onChange:f,rowClues:i,colClues:h})]})},{})}))}},t={};function r(n){var l=t[n];if(void 0!==l)return l.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.m=e,r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];r.O=(t,n,l,o)=>{if(n){o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,l,o];return}for(var s=1/0,u=0;u<e.length;u++){for(var[n,l,o]=e[u],a=!0,i=0;i<n.length;i++)(!1&o||s>=o)&&Object.keys(r.O).every(e=>r.O[e](n[i]))?n.splice(i--,1):(a=!1,o<s&&(s=o));if(a){e.splice(u--,1);var h=l();void 0!==h&&(t=h)}}return t}})(),r.rv=()=>"1.3.12",(()=>{var e={980:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var l,o,[u,s,a]=n,i=0;if(u.some(t=>0!==e[t])){for(l in s)r.o(s,l)&&(r.m[l]=s[l]);if(a)var h=a(r)}for(t&&t(n);i<u.length;i++)o=u[i],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(h)},n=self.webpackChunknonogramthing=self.webpackChunknonogramthing||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.ruid="bundler=rspack@1.3.12";var n=r.O(void 0,["361"],function(){return r(592)});n=r.O(n)})();